/* ==========================================================================
   Released Under the MIT Licence -- http://opensource.org/licenses/MIT
   ========================================================================== */
var minutes,second,seconds;var counter=1500;var secToMin=function(input){minutes=String(Math.floor(input/60));seconds=input%60;if(seconds<10){String(seconds);seconds="0"+seconds}else String(seconds);return minutes+":"+seconds};var minToSec=function(input){return input*60};var pomodorinoValue=1500;var shortBreakValue=300;var longBreakValue=900;var strict=false;
$(document).ready(function(){var custom=localStorage.getItem("custom");if(custom==="true"){var getPomodorino=localStorage.getItem("pomodorino");pomodorinoValue=parseInt(getPomodorino,10);var getShortBreak=localStorage.getItem("shortBreak");shortBreakValue=parseInt(getShortBreak,10);var getLongBreak=localStorage.getItem("longBreak");longBreakValue=parseInt(getLongBreak,10);var getStrict=localStorage.getItem("strict");if(getStrict==="true")strict=true}});
var populateSettings=function(){$("#setPom").val(pomodorinoValue/60);$("#setShort").val(shortBreakValue/60);$("#setLong").val(longBreakValue/60);if(strict)$("#setStrict").attr("checked","checked");else $("#setStrict").removeAttr("checked")};$(document).ready(function(){populateSettings()});var toNumber=function(number){var n=parseInt(number,10);if(n!==n)return"NaN";return minToSec(n)};
var saveSettings=function(){var userPomodorinoValue=toNumber($("#setPom").val()),userShortBreakValue=toNumber($("#setShort").val()),userLongBreakValue=toNumber($("#setLong").val());if(userPomodorinoValue==="NaN"||userPomodorinoValue<=0){pomodorinoValue=1500;localStorage.setItem("pomodorino","1500")}else{pomodorinoValue=userPomodorinoValue;localStorage.setItem("pomodorino",userPomodorinoValue)}if(userShortBreakValue==="NaN"||userShortBreakValue<=0){shortBreakValue=300;localStorage.setItem("shortBreak",
"300")}else{shortBreakValue=userShortBreakValue;localStorage.setItem("shortBreak",userShortBreakValue)}if(userLongBreakValue==="NaN"||userLongBreakValue<=0){longBreakValue=900;localStorage.setItem("longBreak","900")}else{longBreakValue=userLongBreakValue;localStorage.setItem("longBreak",userLongBreakValue)}strict=$("#setStrict").prop("checked");if(strict)localStorage.setItem("strict","true");else localStorage.setItem("strict","false");localStorage.setItem("custom","true");populateSettings()};
$(document).on("close","[data-reveal]",function(){saveSettings()});var isPom=false;var pomCount=0;
var recommend=function(){if(isPom)pomCount+=1;if(isPom&&pomCount===4)$("#lb").addClass("recommended");else if(isPom&&pomCount>0)$("#sb").addClass("recommended");else $("#pomodorino").addClass("recommended");if(pomCount===4){$("#count4").css("background-color","#2ba6cb");pomCount=0}else if(pomCount===3)$("#count3").css("background-color","#2ba6cb");else if(pomCount===2)$("#count2").css("background-color","#2ba6cb");else if(pomCount===1)$("#count1").css("background-color","#2ba6cb");else $(".counter").css("background-color",
"#fff");isPom=false};var clearRecommendation=function(){$(".recommended").removeClass("recommended")};var printOut=function(){var currentTime=secToMin(counter);$("title").text("Pomodorino ("+currentTime+")");$("#time").text(currentTime)};var stopTimer=function(){window.clearInterval(second)};var timer=function(){counter-=1;printOut();if(counter===0){stopTimer();document.getElementById("alarm").play();if(strict&&!isPom)pomodorino();else recommend()}};
var startTimer=function(){window.clearInterval(second);second=window.setInterval("timer()",1E3)};var pomodorino=function(){clearRecommendation();counter=pomodorinoValue;printOut();startTimer();$("#start").addClass("hide");$("#stop").removeClass("hide");isPom=true};var shortBreak=function(){clearRecommendation();counter=shortBreakValue;printOut();startTimer();$("#start").addClass("hide");$("#stop").removeClass("hide");isPom=false};
var longBreak=function(){clearRecommendation();counter=longBreakValue;printOut();startTimer();$("#start").addClass("hide");$("#stop").removeClass("hide");isPom=false};
$(document).ready(function(){$("#pomodorino").click(function(){pomodorino();document.getElementById("alarm").play();document.getElementById("alarm").pause()});$("#sb").click(function(){shortBreak();document.getElementById("alarm").play();document.getElementById("alarm").pause()});$("#lb").click(function(){longBreak();document.getElementById("alarm").play();document.getElementById("alarm").pause()});$("#start").click(function(){startTimer();$("#start").addClass("hide");$("#stop").removeClass("hide")});
$("#stop").click(function(){stopTimer();$("#stop").addClass("hide");$("#start").removeClass("hide");$("title").text("Pomodorino (PAUSED)");$("#time").text("PAUSED")});$("#time").text(secToMin(pomodorinoValue))});
